function memory = run(mem)  pointer = 0;  relativeBase = 0;  running = true;  memory = mem;  while (running)    opcode = memory(pointer + 1);    switch (mod(opcode, 100))      case 1        a = getParam(1, pointer, memory, relativeBase);        b = getParam(2, pointer, memory, relativeBase);        memory = write(3, pointer, memory, relativeBase, a + b);        pointer += 4;       case 2        a = getParam(1, pointer, memory, relativeBase);        b = getParam(2, pointer, memory, relativeBase);        memory = write(3, pointer, memory, relativeBase, a * b);        pointer += 4;       case 3         value = input('Provide input');         memory = write(1, pointer, memory, relativeBase, value);         pointer += 2;        case 4          value = getParam(1, pointer, memory, relativeBase);          disp(["output ", num2str(value)])         pointer += 2;        case 5          a = getParam(1, pointer, memory, relativeBase);          b = getParam(2, pointer, memory, relativeBase);          if (a != 0)            pointer = b;          else            pointer += 3;          endif        case 6          a = getParam(1, pointer, memory, relativeBase);          b = getParam(2, pointer, memory, relativeBase);          if (a == 0)            pointer = b;          else            pointer += 3;          endif        case 7          a = getParam(1, pointer, memory, relativeBase);          b = getParam(2, pointer, memory, relativeBase);          value = 0;          if (a < b)            value = 1;          endif          memory = write(3, pointer, memory, relativeBase, value);          pointer += 4;        case 8          a = getParam(1, pointer, memory, relativeBase);          b = getParam(2, pointer, memory, relativeBase);          value = 0;          if (a == b)            value = 1;          endif          memory = write(3, pointer, memory, relativeBase, value);          pointer += 4;        case 9          a = getParam(1, pointer, memory, relativeBase);          relativeBase += a;          pointer += 2;        case 99          running = false;        otherwise          disp(["wrong opcode ", num2str(opcode)]);          running = false;    endswitch  endwhileendfunction